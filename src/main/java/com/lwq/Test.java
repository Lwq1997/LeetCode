package com.lwq;

import java.util.List;

public class Test {
    public TreeNode res ;

    public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) {
        dfs(root,p,q);
        return res;
    }

    private boolean dfs(TreeNode root, TreeNode p, TreeNode q) {
        if(root == null){
            return false;
        }
        Boolean left_son = dfs(root.left,p,q);
        Boolean right_son = dfs(root.right,p,q);

        if((left_son && right_son) || ((left_son||right_son) && (root.val==p.val || root.val==q.val)) ){
            res = root;
        }

        // 只要当前节点的左子树中包含过p，q的任意一个，就是true
        // 只要当前节点的右子树中包含过p，q的任意一个，就是true
        // 只要当前节点为p，q的任意一个，就是true
        return left_son || right_son || root.val==p.val || root.val == q.val;
    }

    public static void main(String[] args) {
        byte[] bytes = {8, 12, 16, -23, -76, -71, -32, -52, 1, 26, 14, 49, 50, 95, 53, 52, 57, 54, 51, 49, 48, 48, 50, 54, 53, 34, 36, 98, 56, 54, 102, 98, 51, 99, 97, 45, 53, 50, 53, 98, 45, 52, 97, 98, 100, 45, 57, 100, 101, 52, 45, 57, 55, 51, 100, 48, 100, 48, 50, 54, 50, 48, 57, 40, 1, 48, 1, 58, 20, 108, 105, 118, 101, 115, 100, 107, 95, 115, 104, 111, 119, 95, 112, 114, 111, 100, 117, 99, 116, 64, -47, -47, -54, -7, 5, 74, 19, 50, 48, 50, 48, 45, 48, 56, 45, 49, 49, 32, 50, 50, 58, 49, 56, 58, 53, 55, 80, -12, -33, -118, -17, -67, 46, 90, 19, 50, 48, 50, 48, 45, 48, 56, 45, 49, 49, 32, 50, 50, 58, 49, 56, 58, 48, 55, 96, -99, -1, -1, -1, -1, -1, -1, -1, -1, 1, 104, -96, -24, -128, -68, -86, -12, -113, 3, 114, 24, 99, 111, 109, 46, 115, 115, 46, 97, 110, 100, 114, 111, 105, 100, 46, 117, 103, 99, 46, 97, 119, 101, 109, 101, 122, 8, 104, 117, 97, 119, 101, 105, 95, 49, -128, 1, -24, 8, -118, 1, 5, 97, 119, 101, 109, 101, -110, 1, 10, 101, 95, 99, 111, 109, 109, 101, 114, 99, 101, -102, 1, 6, 49, 50, 46, 50, 46, 48, -94, 1, 2, 122, 104, -88, 1, 32, -78, 1, 5, 97, 119, 101, 109, 101, -70, 1, 9, 48, 44, 49, 54, 48, 56, 56, 52, 56, -56, 1, -72, -64, -72, -95, -119, 2, -46, 1, 13, 49, 49, 51, 46, 50, 55, 46, 52, 57, 46, 49, 56, 55, -35, 1, 0, 0, 0, 65, -30, 1, 8, 87, 76, 90, 45, 65, 78, 48, 48, -22, 1, 6, 72, 85, 65, 87, 69, 73, -14, 1, 7, 97, 110, 100, 114, 111, 105, 100, -6, 1, 2, 49, 48, -118, 2, 4, 119, 105, 102, 105, -110, 2, 12, -28, -72, -83, -27, -101, -67, -25, -89, -69, -27, -118, -88, -102, 2, 9, 50, 49, 53, 57, 120, 49, 48, 56, 48, -94, 2, 4, 109, 100, 112, 105, -86, 2, 6, 1, 2, 6, 7, 8, 9, -78, 2, 14, 54, 50, 52, 51, 50, 56, 55, 54, 56, 49, 48, 51, 48, 48, -70, 2, 1, 55, -62, 2, 4, 108, 105, 118, 101, -54, 2, 2, 78, 65, -46, 2, 2, 78, 65, -38, 2, 1, 49, -30, 2, 2, 78, 65, -22, 2, 9, 108, 105, 118, 101, 95, 99, 101, 108, 108, -14, 2, 15, 104, 111, 109, 101, 112, 97, 103, 101, 95, 102, 111, 108, 108, 111, 119, -6, 2, 4, 100, 114, 97, 119, -126, 3, 19, 54, 56, 53, 57, 54, 54, 52, 54, 51, 51, 55, 54, 51, 50, 54, 57, 51, 56, 57, -118, 3, 16, 51, 48, 49, 54, 54, 57, 55, 50, 56, 52, 54, 54, 50, 49, 49, 57, -110, 3, 2, 78, 65, -102, 3, 2, 78, 65, -94, 3, 2, 78, 65, -86, 3, 2, 78, 65, -78, 3, 6, 110, 111, 114, 109, 97, 108, -70, 3, 2, 78, 65, -62, 3, 2, 78, 65, -54, 3, 19, 54, 56, 53, 57, 54, 57, 54, 54, 52, 51, 57, 51, 49, 57, 48, 48, 54, 55, 57, -46, 3, 4, 50, 51, 52, 56, -38, 3, 2, 78, 65, -30, 3, 15, 108, 105, 118, 101, 95, 112, 111, 112, 117, 112, 95, 99, 97, 114, 100, -22, 3, 5, 84, 69, 77, 65, 73, -14, 3, 34, 50, 48, 50, 48, 48, 56, 49, 49, 50, 50, 49, 55, 49, 52, 48, 49, 48, 49, 51, 49, 48, 51, 52, 48, 55, 52, 50, 70, 66, 57, 56, 68, 55, 48, -6, 3, 2, 78, 65, -126, 4, 2, 78, 65, -118, 4, 2, 78, 65, -110, 4, 2, 78, 65, -102, 4, 2, 78, 65, -94, 4, 2, 78, 65, -86, 4, 2, 78, 65, -78, 4, 2, 78, 65, -70, 4, 30, 10, 7, 114, 111, 111, 109, 95, 105, 100, 18, 19, 54, 56, 53, 57, 54, 57, 54, 54, 52, 51, 57, 51, 49, 57, 48, 48, 54, 55, 57, -70, 4, 29, 10, 20, 69, 86, 69, 78, 84, 95, 79, 82, 73, 71, 73, 78, 95, 70, 69, 65, 84, 85, 82, 69, 18, 5, 84, 69, 77, 65, 73, -70, 4, 18, 10, 10, 101, 110, 116, 101, 114, 95, 102, 114, 111, 109, 18, 4, 108, 105, 118, 101, -70, 4, 29, 10, 9, 97, 110, 99, 104, 111, 114, 95, 105, 100, 18, 16, 51, 48, 49, 54, 54, 57, 55, 50, 56, 52, 54, 54, 50, 49, 49, 57, -70, 4, 19, 10, 11, 97, 99, 116, 105, 111, 110, 95, 116, 121, 112, 101, 18, 4, 100, 114, 97, 119, -70, 4, 36, 10, 21, 112, 114, 111, 100, 117, 99, 116, 95, 97, 99, 116, 105, 118, 105, 116, 121, 95, 116, 121, 112, 101, 18, 11, 110, 111, 110, 97, 99, 116, 105, 118, 105, 116, 121, -70, 4, 18, 10, 13, 102, 111, 108, 108, 111, 119, 95, 115, 116, 97, 116, 117, 115, 18, 1, 49, -70, 4, 19, 10, 14, 99, 111, 109, 109, 111, 100, 105, 116, 121, 95, 116, 121, 112, 101, 18, 1, 55, -70, 4, 16, 10, 8, 100, 117, 114, 97, 116, 105, 111, 110, 18, 4, 50, 51, 52, 56, -70, 4, 31, 10, 12, 99, 97, 114, 114, 105, 101, 114, 95, 116, 121, 112, 101, 18, 15, 108, 105, 118, 101, 95, 112, 111, 112, 117, 112, 95, 99, 97, 114, 100, -70, 4, 30, 10, 12, 99, 111, 109, 109, 111, 100, 105, 116, 121, 95, 105, 100, 18, 14, 54, 50, 52, 51, 50, 56, 55, 54, 56, 49, 48, 51, 48, 48, -70, 4, 25, 10, 12, 101, 110, 116, 101, 114, 95, 109, 101, 116, 104, 111, 100, 18, 9, 108, 105, 118, 101, 95, 99, 101, 108, 108, -70, 4, 23, 10, 13, 112, 114, 111, 100, 117, 99, 116, 95, 108, 97, 98, 101, 108, 18, 6, 110, 111, 114, 109, 97, 108, -70, 4, 31, 10, 8, 103, 114, 111, 117, 112, 95, 105, 100, 18, 19, 54, 56, 53, 57, 54, 54, 52, 54, 51, 51, 55, 54, 51, 50, 54, 57, 51, 56, 57, -70, 4, 19, 10, 11, 115, 100, 107, 95, 118, 101, 114, 115, 105, 111, 110, 18, 4, 49, 54, 51, 48, -70, 4, 35, 10, 16, 101, 110, 116, 101, 114, 95, 102, 114, 111, 109, 95, 109, 101, 114, 103, 101, 18, 15, 104, 111, 109, 101, 112, 97, 103, 101, 95, 102, 111, 108, 108, 111, 119, -70, 4, 28, 10, 20, 95, 112, 97, 114, 97, 109, 95, 108, 105, 118, 101, 95, 112, 108, 97, 116, 102, 111, 114, 109, 18, 4, 108, 105, 118, 101, -70, 4, 48, 10, 10, 114, 101, 113, 117, 101, 115, 116, 95, 105, 100, 18, 34, 50, 48, 50, 48, 48, 56, 49, 49, 50, 50, 49, 55, 49, 52, 48, 49, 48, 49, 51, 49, 48, 51, 52, 48, 55, 52, 50, 70, 66, 57, 56, 68, 55, 48, -62, 4, -94, 6, 16, -87, 23, 26, 10, 101, 95, 99, 111, 109, 109, 101, 114, 99, 101, 34, 6, 49, 50, 46, 50, 46, 48, 42, 24, 99, 111, 109, 46, 115, 115, 46, 97, 110, 100, 114, 111, 105, 100, 46, 117, 103, 99, 46, 97, 119, 101, 109, 101, 50, 15, -26, -118, -106, -23, -97, -77, -25, -97, -83, -24, -89, -122, -23, -94, -111, 58, 8, 104, 117, 97, 119, 101, 105, 95, 49, 66, 4, 119, 105, 102, 105, 74, 13, 49, 49, 51, 46, 50, 55, 46, 52, 57, 46, 49, 56, 55, 82, 12, -28, -72, -83, -27, -101, -67, -25, -89, -69, -27, -118, -88, 90, 7, 97, 110, 100, 114, 111, 105, 100, 98, 2, 49, 48, 104, 32, 114, 5, 97, 119, 101, 109, 101, 120, -96, -24, -128, -68, -86, -12, -113, 3, -118, 1, -62, 1, 123, 34, 102, 105, 108, 116, 101, 114, 95, 119, 97, 114, 110, 34, 58, 48, 44, 34, 119, 101, 98, 95, 117, 97, 34, 58, 34, 77, 111, 122, 105, 108, 108, 97, 92, 47, 53, 46, 48, 32, 40, 76, 105, 110, 117, 120, 59, 32, 65, 110, 100, 114, 111, 105, 100, 32, 49, 48, 59, 32, 87, 76, 90, 45, 65, 78, 48, 48, 32, 66, 117, 105, 108, 100, 92, 47, 72, 85, 65, 87, 69, 73, 87, 76, 90, 45, 65, 78, 48, 48, 59, 32, 119, 118, 41, 32, 65, 112, 112, 108, 101, 87, 101, 98, 75, 105, 116, 92, 47, 53, 51, 55, 46, 51, 54, 32, 40, 75, 72, 84, 77, 76, 44, 32, 108, 105, 107, 101, 32, 71, 101, 99, 107, 111, 41, 32, 86, 101, 114, 115, 105, 111, 110, 92, 47, 52, 46, 48, 32, 67, 104, 114, 111, 109, 101, 92, 47, 55, 56, 46, 48, 46, 51, 57, 48, 52, 46, 49, 48, 56, 32, 77, 111, 98, 105, 108, 101, 32, 83, 97, 102, 97, 114, 105, 92, 47, 53, 51, 55, 46, 51, 54, 34, 125, -110, 1, 32, 49, 53, 57, 55, 49, 53, 53, 53, 51, 55, 55, 53, 50, 49, 52, 52, 48, 49, 54, 50, 49, 52, 49, 52, 51, 48, 48, 52, 51, 56, 48, 55, -104, 1, -72, -97, 1, -94, 1, 2, 104, 108, -86, 6, 24, 53, 55, 98, 102, 97, 50, 55, 99, 54, 55, 101, 53, 56, 101, 55, 100, 57, 50, 48, 48, 50, 56, 100, 51, -80, 6, -120, -85, 7, -62, 6, 32, 97, 101, 97, 54, 49, 53, 97, 98, 57, 49, 48, 48, 49, 53, 48, 51, 56, 102, 55, 51, 99, 52, 55, 101, 52, 53, 100, 50, 49, 52, 54, 54, -38, 6, 2, 122, 104, -22, 6, 2, 67, 78, -62, 12, 8, 87, 76, 90, 45, 65, 78, 48, 48, -54, 12, 6, 72, 85, 65, 87, 69, 73, -46, 12, 6, 72, 85, 65, 87, 69, 73, -38, 12, 9, 50, 49, 53, 57, 120, 49, 48, 56, 48, -30, 12, 4, 109, 100, 112, 105, -24, 12, -32, 3, -126, 13, 9, 97, 114, 109, 54, 52, 45, 118, 56, 97, -120, 13, -24, 8, -110, 13, 5, 97, 119, 101, 109, 101, -19, 18, 0, 0, 0, 65, -14, 18, 13, 65, 115, 105, 97, 47, 83, 104, 97, 110, 103, 104, 97, 105, -8, 18, -128, -62, 3, -126, 19, 5, 52, 54, 48, 48, 48, -120, 19, 29, -110, 19, 35, 69, 77, 85, 73, 45, 69, 109, 111, 116, 105, 111, 110, 85, 73, 95, 49, 48, 46, 49, 46, 48, 45, 49, 48, 46, 49, 46, 48, 46, 50, 49, 50, 67, 48, 48, -102, 19, 49, 69, 109, 111, 116, 105, 111, 110, 85, 73, 95, 49, 48, 46, 49, 46, 48, 95, 87, 76, 90, 45, 65, 78, 48, 48, 32, 49, 48, 46, 49, 46, 48, 46, 50, 49, 50, 40, 67, 48, 48, 69, 50, 49, 48, 82, 52, 80, 49, 41, -94, 19, 53, 101, 53, 51, 102, 53, 54, 53, 95, 50, 48, 50, 48, 48, 56, 48, 52, 95, 55, 52, 49, 102, 55, 50, 100, 56, 45, 100, 54, 48, 101, 45, 49, 49, 101, 97, 45, 56, 53, 54, 100, 45, 48, 50, 52, 50, 48, 97, 48, 48, 48, 48, 49, 52, -88, 19, -119, -85, 7, -78, 19, 2, 99, 110, -70, 19, 46, 91, 123, 34, 115, 105, 109, 95, 115, 101, 114, 105, 97, 108, 95, 110, 117, 109, 98, 101, 114, 34, 58, 34, 56, 57, 56, 54, 48, 48, 51, 51, 48, 52, 49, 54, 52, 54, 56, 55, 50, 48, 54, 53, 34, 125, 93, -54, 19, 6, 1, 2, 6, 7, 8, 9, -118, 25, 9, 48, 44, 49, 54, 48, 56, 56, 52, 56, -54, 4, -53, 1, 10, 14, 49, 50, 95, 53, 52, 57, 54, 51, 49, 48, 48, 50, 54, 53, 16, -23, -76, -71, -32, -52, 1, 24, 12, 32, 1, 40, 1, 48, -72, -64, -72, -95, -119, 2, 58, 16, 48, 100, 100, 53, 49, 50, 101, 54, 101, 100, 101, 48, 55, 101, 48, 55, 66, 15, 56, 54, 51, 56, 51, 48, 48, 52, 51, 51, 52, 52, 55, 57, 49, 74, 36, 56, 53, 51, 99, 51, 99, 54, 98, 45, 102, 102, 99, 101, 45, 52, 56, 101, 52, 45, 56, 50, 98, 99, 45, 102, 54, 98, 57, 51, 100, 54, 52, 50, 52, 102, 55, 82, 17, 52, 65, 58, 49, 56, 58, 67, 67, 58, 68, 67, 58, 51, 51, 58, 69, 69, 90, 16, 65, 68, 70, 52, 67, 50, 48, 49, 48, 57, 48, 48, 50, 51, 49, 52, 98, 16, 65, 68, 70, 52, 67, 50, 48, 49, 48, 57, 48, 48, 50, 51, 49, 52, -102, 1, 36, 98, 101, 100, 102, 57, 55, 102, 52, 45, 99, 102, 98, 102, 45, 57, 48, 98, 54, 45, 50, 54, 101, 100, 45, 101, 102, 52, 98, 102, 102, 55, 57, 57, 102, 54, 56, -46, 4, 16, 10, 11, 102, 105, 108, 116, 101, 114, 95, 119, 97, 114, 110, 18, 1, 48, -46, 4, -86, 1, 10, 6, 119, 101, 98, 95, 117, 97, 18, -97, 1, 77, 111, 122, 105, 108, 108, 97, 47, 53, 46, 48, 32, 40, 76, 105, 110, 117, 120, 59, 32, 65, 110, 100, 114, 111, 105, 100, 32, 49, 48, 59, 32, 87, 76, 90, 45, 65, 78, 48, 48, 32, 66, 117, 105, 108, 100, 47, 72, 85, 65, 87, 69, 73, 87, 76, 90, 45, 65, 78, 48, 48, 59, 32, 119, 118, 41, 32, 65, 112, 112, 108, 101, 87, 101, 98, 75, 105, 116, 47, 53, 51, 55, 46, 51, 54, 32, 40, 75, 72, 84, 77, 76, 44, 32, 108, 105, 107, 101, 32, 71, 101, 99, 107, 111, 41, 32, 86, 101, 114, 115, 105, 111, 110, 47, 52, 46, 48, 32, 67, 104, 114, 111, 109, 101, 47, 55, 56, 46, 48, 46, 51, 57, 48, 52, 46, 49, 48, 56, 32, 77, 111, 98, 105, 108, 101, 32, 83, 97, 102, 97, 114, 105, 47, 53, 51, 55, 46, 51, 54, -40, 4, -128, -58, -101, -7, 5};
        System.out.println(new String(bytes));
    }
}
